{% extends '@EasyAdmin/page/content.html.twig' %}

{# this tag only applies to the forms defined in this template #}
{% form_theme form 'bootstrap_5_layout.html.twig' %}

{% block content_title %}
PRONEMA - Production des Notes (de débit, de crédit ou perception) en Masse
{% endblock %}
{#
{% block page_actions %}
    <a class="btn btn-primary" href="...">Produire</a>
{% endblock %}
#}

{% block main %}
<div class="card">
  <div class="card-body">
    <h5 class="card-title"><i class="fas fa-file-shield"></i> {{ tranche.police }}</h5>
    <h6 class="card-subtitle mb-2 text-body-secondary"><i class="fa-solid fa-layer-group"></i> {{ tranche }}</h6>
    <p class="card-text">
        <a href="#" class="link-primary"><i class="fas fa-person-shelter"></i> {{ tranche.client }}</a>&nbsp; 
        <a href="#" class="link-primary"><i class="fas fa-gifts"></i> {{ tranche.produit }}</a>&nbsp;
        <a href="#" class="link-primary"><i class="fas fa-handshake"></i> {{ tranche.partenaire }}</a>&nbsp;
        <a href="#" class="link-primary"><i class="fa-regular fa-calendar-check"></i> Enregistrée le {{tranche.createdAt|date("d/m/Y")}}</a>&nbsp;
        <a href="#" class="link-primary"><i class="fa-solid fa-user"></i> {{ tranche.utilisateur }}</a>
    </p>
  </div>
</div>
<div class="mt-3">
  <p>
    <h5 class="mb-1">Veuillez préciser ci-dessous les notes que vous désirez produire avant d'actionner le bouton de soumission.</h5>
  </p>
  <p>
    {{ form_start(form) }}
      <ul class="list-group mt-3">
        <li class="list-group-item list-group-item-primary">
          <h5 class="mb-1">Groupe A: les notes de débit destinées à {{ tranche.client }}</h5>
        </li>
        <li class="list-group-item list-group-item-action pt-3 pb-0 d-flex justify-content-between align-items-center">
          {{ form_row(form.produireNDPrime) }}
          <span class="badge badge-primary badge-pill">
            Solde dû à facturer : {{ (tranche.premiumInvoiceDetails['solde'] / 100)|format_currency(tranche.monnaie_Affichage.code)}}
          </span>
        </li>
        <li class="list-group-item list-group-item-action pt-3 pb-0 d-flex justify-content-between align-items-center">
          {{ form_row(form.produireNDFraisGestion) }}
          <span class="badge badge-primary badge-pill">
            Solde dû à facturer : {{ (tranche.fraisGestionInvoiceDetails['solde'] / 100)|format_currency(tranche.monnaie_Affichage.code)}}
          </span>  
        </li>
      </ul>
      <ul class="list-group mt-3">
        <li class="list-group-item list-group-item-primary">
          <h5 class="mb-1">Groupe B: les notes de débit destinées à {{ tranche.assureur }}</h5>
        </li>
        <li class="list-group-item list-group-item-action pt-3 pb-0">{{ form_row(form.produireNDComLocale) }}</li>
        <li class="list-group-item list-group-item-action pt-3 pb-0">{{ form_row(form.produireNDComReassurance) }}</li>
        <li class="list-group-item list-group-item-action pt-3 pb-0">{{ form_row(form.produireNDComFronting) }}</li>
      </ul>
      <ul class="list-group mt-3">
        <li class="list-group-item list-group-item-primary">
          <h5 class="mb-1">Groupe C: la note de crédit vers  {{ tranche.partenaire }}</h5>
        </li>
        <li class="list-group-item list-group-item-action pt-3 pb-0">{{ form_row(form.produireNCRetrocommission) }}</li>
      </ul>
      <ul class="list-group mt-3">
        <li class="list-group-item list-group-item-primary">
          <h5 class="mb-1">Groupe D: les notes de crédit vers l'autorité fiscale et/ou le régulateur</h5>
        </li>
        <li class="list-group-item list-group-item-action pt-3 pb-0">{{ form_row(form.produireNCTaxeCourtier) }}</li>
        <li class="list-group-item list-group-item-action pt-3 pb-0">{{ form_row(form.produireNCTaxeAssureur) }}</li>
      </ul>
      {# {{ form_widget(form) }} #}
      <button type="submit" class="btn btn-primary mt-3">Produire les notes</button>
    {{ form_end(form) }}
      {#{{ form(form) }}#}
{% endblock %}